<h1 id="templates-small-bridge-view-small-">Templates <small>bridge.view</small></h1>
<p class="lead">
Bridge's templating engine automatically compiles and caches templates of various formats for performance and
interoperability. And it's super easy to use!
</p>

<p>Any file inside the templates directory (configurable in <mark>config/view.yaml</mark>, defaults to
<mark>lib/templates</mark>) will be cached by a key generated by the filename, replacing directory separators with dots,
and ignoring the extension:</p>
<ul>
<li><mark>partials/navigation.html</mark></li>
<li><code>partials.navigation</code></li>
</ul>
<h2 id="usage">Usage</h2>
<p>Let's start with a simple HTML page:</p>
<pre><code class="prettyprint lang-html prettyprinted" data-lang="html" style=""><span class="com">&lt;!-- lib/templates/index.html --&gt;</span><span class="pln">
</span><span class="dec">&lt;!DOCTYPE html&gt;</span><span class="pln">
</span><span class="tag">&lt;html&gt;</span><span class="pln">
  </span><span class="tag">&lt;head&gt;</span><span class="pln">
    </span><span class="tag">&lt;title&gt;</span><span class="pln">My website - Home</span><span class="tag">&lt;/title&gt;</span><span class="pln">
  </span><span class="tag">&lt;/head&gt;</span><span class="pln">
  </span><span class="tag">&lt;body&gt;</span><span class="pln">
    </span><span class="tag">&lt;h1&gt;</span><span class="pln">Welcome to my website!</span><span class="tag">&lt;/h1&gt;</span><span class="pln">
  </span><span class="tag">&lt;/body&gt;</span><span class="pln">
</span><span class="tag">&lt;/html&gt;</span></code></pre>
<p>Return the page in route handlers by using the <code>template</code> helper function:</p>
<pre><code class="prettyprint lang-dart prettyprinted" data-lang="dart" style=""><span class="pln">router</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">'/'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">return</span><span class="pln"> template</span><span class="pun">(</span><span class="str">'index'</span><span class="pun">);</span><span class="pln"> </span><span class="com">// This is the key mentioned above</span><span class="pln">
</span><span class="pun">});</span></code></pre>
<h3 id="extending-master-pages">Extending master pages</h3>
<p>We don't want our entire HTML boilerplate in each page template. So we extract a master page, like this:</p>
<pre><code class="prettyprint lang-bridgehtml prettyprinted" data-lang="bridgehtml" style=""><span class="com">// lib/templates/app.html – This comment will not be in the output</span><span class="pln">
</span><span class="dec">&lt;!DOCTYPE html&gt;</span><span class="pln">
</span><span class="tag">&lt;html&gt;</span><span class="pln">
  </span><span class="tag">&lt;head&gt;</span><span class="pln">
    </span><span class="tag">&lt;title&gt;</span><span class="pln">My website - </span><span class="kwd">@block</span><span class="pln"> </span><span class="pun">(</span><span class="str">'title'</span><span class="pun">)</span><span class="tag">&lt;/title&gt;</span><span class="pln">
  </span><span class="tag">&lt;/head&gt;</span><span class="pln">
  </span><span class="tag">&lt;body&gt;</span><span class="pln">
    </span><span class="kwd">@block</span><span class="pln"> </span><span class="pun">(</span><span class="str">'contents')</span><span class="pln">
  </span><span class="tag">&lt;/body&gt;</span><span class="pln">
</span><span class="tag">&lt;/html&gt;</span></code></pre>
<pre><code class="prettyprint lang-bridgehtml prettyprinted" data-lang="bridgehtml" style=""><span class="com">// lib/templates/index.html</span><span class="pln">
</span><span class="kwd">@extends</span><span class="pln"> </span><span class="pun">(</span><span class="str">'app'</span><span class="pun">)</span><span class="pln"> </span><span class="com">// Notice that this refers to the master page, by the same key syntax</span><span class="pln">

</span><span class="kwd">@block</span><span class="pln"> </span><span class="pun">(</span><span class="str">'title'</span><span class="pun">)</span><span class="pln">
  Home
</span><span class="kwd">@end block</span><span class="pln">

</span><span class="kwd">@block</span><span class="pln"> </span><span class="pun">(</span><span class="str">'contents')</span><span class="pln">
  </span><span class="tag">&lt;h1&gt;</span><span class="pln">Welcome to my website!</span><span class="tag">&lt;/h1&gt;</span><span class="pln">
</span><span class="kwd">@end block</span></code></pre>
<h2 id="pre-processors">Pre-processors</h2>
<p>Now why let's create an article template for some kind of blog. And let's we use <a href="//jade-lang.com">Jade</a>!</p>
<pre><code class="prettyprint lang-jade prettyprinted" data-lang="jade" style=""><span class="com">// lib/templates/article.jade</span><span class="pln">
extends </span><span class="str">'app'</span><span class="pln">

block </span><span class="str">'contents'</span><span class="pln">
  article</span><span class="pun">.</span><span class="pln">main
    header</span><span class="pun">.</span><span class="pln">article</span><span class="pun">-</span><span class="pln">header
      block </span><span class="str">'header'</span><span class="pln">
    main</span><span class="pun">.</span><span class="pln">article</span><span class="pun">-</span><span class="pln">body
      block </span><span class="str">'body'</span></code></pre>
<p>This Jade file extends our base <mark>app.html</mark> template. Now let's write a blog entry, in Markdown:</p>
<pre><code class="prettyprint lang-markdown prettyprinted" data-lang="markdown" style=""><span class="com">// We can use Bridge HTML features in the Markdown file – like comments!</span><span class="pln">
</span><span class="com">// lib/templates/posts/example-post.md</span><span class="pln">

</span><span class="typ">This</span><span class="pln"> </span><span class="kwd">is</span><span class="pln"> an example blog post </span><span class="pun">–</span><span class="pln"> </span><span class="kwd">in</span><span class="pln"> </span><span class="pun">**</span><span class="typ">Markdown</span><span class="pun">**!</span></code></pre>
<h2 id="partials-and-variables">Partials and variables</h2>
<p>To make this a little bit adaptive, let's create a template that dynamically includes posts as partials:</p>
<pre><code class="prettyprint lang-bridgehtml prettyprinted" data-lang="bridgehtml" style=""><span class="com">// lib/templates/post.html</span><span class="pln">
</span><span class="kwd">@extends</span><span class="pln"> </span><span class="pun">(</span><span class="str">'article'</span><span class="pun">)</span><span class="pln">

</span><span class="com">// Block from the 'app' master page</span><span class="pln">
</span><span class="kwd">@block</span><span class="pln"> </span><span class="pun">(</span><span class="str">'title'</span><span class="pun">)</span><span class="pln">
  </span><span class="lit">${</span><span class="pln">post</span><span class="pun">.</span><span class="pln">title</span><span class="lit">}</span><span class="pln">
</span><span class="kwd">@end block</span><span class="pln">

</span><span class="kwd">@block</span><span class="pln"> </span><span class="pun">(</span><span class="str">'header')</span><span class="pln">
  </span><span class="tag">&lt;h1&gt;</span><span class="lit">${</span><span class="pln">post</span><span class="pun">.</span><span class="pln">title</span><span class="lit">}</span><span class="tag">&lt;/h1&gt;</span><span class="pln">
</span><span class="kwd">@end block</span><span class="pln">

</span><span class="kwd">@block</span><span class="pln"> </span><span class="pun">(</span><span class="str">'body')</span><span class="pln">
  </span><span class="kwd">@include</span><span class="pln"> </span><span class="pun">(</span><span class="pln">post</span><span class="pun">.</span><span class="pln">name</span><span class="pun">)</span><span class="pln">
</span><span class="kwd">@end block</span></code></pre>
<p>Okay, so in this template we threw in some variables. We also used the <code>include</code> directive. That directive will just
include another template in that place. In our case, however, instead of supplying a template name, we referenced a
<code>name</code> property on some <code>post</code> variable. Let's modify our code a bit, so that it reflects this change, and references
the Markdown post template we wrote:</p>
<pre><code class="prettyprint lang-dart prettyprinted" data-lang="dart" style=""><span class="kwd">class</span><span class="pln"> </span><span class="typ">Post</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="typ">String</span><span class="pln"> title</span><span class="pun">;</span><span class="pln"> </span><span class="com">// Title of the post</span><span class="pln">
  </span><span class="typ">String</span><span class="pln"> name</span><span class="pun">;</span><span class="pln"> </span><span class="com">// Name of the template</span><span class="pln">
</span><span class="pun">}</span></code></pre>
<pre><code class="prettyprint lang-dart prettyprinted" data-lang="dart" style=""><span class="pln">router</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">'/example-post'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">var</span><span class="pln"> post </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Post</span><span class="pun">()</span><span class="pln">
    </span><span class="pun">..</span><span class="pln">title </span><span class="pun">=</span><span class="pln"> </span><span class="str">'Example post'</span><span class="pln">
    </span><span class="pun">..</span><span class="pln">name </span><span class="pun">=</span><span class="pln"> </span><span class="str">'posts.example-post'</span><span class="pun">;</span><span class="pln"> </span><span class="com">// This is the Markdown template</span><span class="pln">

  </span><span class="kwd">return</span><span class="pln"> template</span><span class="pun">(</span><span class="pln">
      </span><span class="str">'post'</span><span class="pun">,</span><span class="pln">
      withData</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="str">'post'</span><span class="pun">:</span><span class="pln"> post</span><span class="pun">});</span><span class="pln">
</span><span class="pun">});</span></code></pre>
<p>Finally, let's say we extract some of the <code>Post</code> logic out into a named constructor that simply takes the template name.
Then we can make the route handler even more neat, by using a wildcard:</p>
<pre><code class="prettyprint lang-dart prettyprinted" data-lang="dart" style=""><span class="pln">router</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="str">'/post/:name'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">({</span><span class="typ">String</span><span class="pln"> name</span><span class="pun">})</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">return</span><span class="pln"> template</span><span class="pun">(</span><span class="str">'post'</span><span class="pun">,</span><span class="pln"> withData</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="str">'post'</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Post</span><span class="pun">.</span><span class="pln">fromName</span><span class="pun">(</span><span class="pln">name</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">});</span><span class="pln">
</span><span class="pun">});</span></code></pre>
<p>With blazing speed, Bridge merges all of these directives, extensions and variables into an output that goes like this:</p>
<pre><code class="prettyprint lang-http prettyprinted" data-lang="http" style=""><span class="pln">GET http</span><span class="pun">:</span><span class="com">//localhost:1337/post/example-post</span></code></pre>
<pre><code class="prettyprint lang-html prettyprinted" data-lang="html" style=""><span class="dec">&lt;!DOCTYPE html&gt;</span><span class="pln">
</span><span class="tag">&lt;html&gt;</span><span class="pln">
  </span><span class="tag">&lt;head&gt;</span><span class="pln">
    </span><span class="tag">&lt;title&gt;</span><span class="pln">My website - Example post</span><span class="tag">&lt;/title&gt;</span><span class="pln">
  </span><span class="tag">&lt;/head&gt;</span><span class="pln">
  </span><span class="tag">&lt;body&gt;</span><span class="pln">
    </span><span class="tag">&lt;article</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">'main'</span><span class="tag">&gt;</span><span class="pln">
      </span><span class="tag">&lt;header</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">'article-header'</span><span class="tag">&gt;</span><span class="pln">
        </span><span class="tag">&lt;h1&gt;</span><span class="pln">Example post</span><span class="tag">&lt;/h1&gt;</span><span class="pln">
      </span><span class="tag">&lt;/header&gt;</span><span class="pln">
      </span><span class="tag">&lt;main</span><span class="pln"> </span><span class="atn">class</span><span class="pun">=</span><span class="atv">'article-body'</span><span class="tag">&gt;</span><span class="pln">
        </span><span class="tag">&lt;p&gt;</span><span class="pln">This is an example blog post – in </span><span class="tag">&lt;strong&gt;</span><span class="pln">Markdown</span><span class="tag">&lt;/strong&gt;</span><span class="pln">!</span><span class="tag">&lt;/p&gt;</span><span class="pln">
      </span><span class="tag">&lt;/main&gt;</span><span class="pln">
    </span><span class="tag">&lt;/article&gt;</span><span class="pln">
  </span><span class="tag">&lt;/body&gt;</span><span class="pln">
</span><span class="tag">&lt;/html&gt;</span></code></pre>

