# Templates <small>bridge.view</small>
<p class='lead'>
Bridge's templating engine automatically compiles and caches templates of various formats for performance and
interoperability. And it's super easy to use!
</p>

Any file inside the templates directory (configurable in <mark>config/view.yaml</mark>, defaults to
<mark>lib/templates</mark>) will be cached by a key generated by the filename, replacing directory separators with dots,
and ignoring the extension:

* <mark>partials/navigation.html</mark>
* `partials.navigation`

## Usage
Let's start with a simple HTML page:

```html
<!-- lib/templates/index.html -->
<!DOCTYPE html>
<html>
  <head>
    <title>My website - Home</title>
  </head>
  <body>
    <h1>Welcome to my website!</h1>
  </body>
</html>
```

Return the page in route handlers by using the `template` helper function:

```dart
router.get('/', () {
  return template('index'); // This is the key mentioned above
});
```

### Extending master pages
We don't want our entire HTML boilerplate in each page template. So we extract a master page, like this:

```bridgehtml
// lib/templates/app.html – This comment will not be in the output
<!DOCTYPE html>
<html>
  <head>
    <title>My website - @block ('title')</title>
  </head>
  <body>
    @block ('contents')
  </body>
</html>
```
```bridgehtml
// lib/templates/index.html
@extends ('app') // Notice that this refers to the master page, by the same key syntax

@block ('title')
  Home
@end block

@block ('contents')
  <h1>Welcome to my website!</h1>
@end block
```

## Pre-processors
Now let's create an article template for some kind of blog. And let's use [Jade](//jade-lang.com)!

```jade
// lib/templates/article.jade
extends 'app'

block 'contents'
  article.main
    header.article-header
      block 'header'
    main.article-body
      block 'body'
```

This Jade file extends our base <mark>app.html</mark> template. Now let's write a blog entry, in Markdown:

```markdown
// We can use Bridge HTML features in the Markdown file – like comments!
// lib/templates/posts/example-post.md

This is an example blog post – in **Markdown**!
```

## Partials and variables
To make this a little bit adaptive, let's create a template that dynamically includes posts as partials:

```bridgehtml
// lib/templates/post.html
@extends ('article')

// Block from the 'app' master page
@block ('title')
  ${post.title}
@end block

@block ('header')
  <h1>${post.title}</h1>
@end block

@block ('body')
  @include (post.name)
@end block
```

Okay, so in this template we threw in some variables. We also used the `include` directive. That directive will just
include another template in that place. In our case, however, instead of supplying a template name, we referenced a
`name` property on some `post` variable. Let's modify our code a bit, so that it reflects this change, and references
the Markdown post template we wrote:

```dart
class Post {
  String title; // Title of the post
  String name; // Name of the template
}
```
```dart
router.get('/example-post', () {
  var post = new Post()
    ..title = 'Example post'
    ..name = 'posts.example-post'; // This is the Markdown template
  
  return template(
      'post',
      withData: {'post': post});
});
```

Finally, let's say we extract some of the `Post` logic out into a named constructor that simply takes the template name.
Then we can make the route handler even more neat, by using a wildcard:

```dart
router.get('/post/:name', ({String name}) {
  return template('post', withData: {
    'post': new Post.fromName(name)
  });
});
```

With blazing speed, Bridge merges all of these directives, extensions and variables into an output that goes like this:

```http
GET http://localhost:1337/post/example-post
```
```html
<!DOCTYPE html>
<html>
  <head>
    <title>My website - Example post</title>
  </head>
  <body>
    <article class='main'>
      <header class='article-header'>
        <h1>Example post</h1>
      </header>
      <main class='article-body'>
        <p>This is an example blog post – in <strong>Markdown</strong>!</p>
      </main>
    </article>
  </body>
</html>
```