<dom-module id='page-home'>
  <style>
    section {
      text-align: center;
      overflow: hidden;
    }

    .copy, .figure {
      transition-property: opacity, transform;
      transition-timing-function: cubic-bezier(.29,.82,.34,.99);
      transition-duration: 1.3s;
    }

    section:not(.shown) .copy, section:not(.shown) .figure {
      opacity: 0;
      transform: translateY(7em);
    }
    section:not(.shown) .figure {
      transform: translateY(12em);
    }

    section#main {
      background-color: #fafafa;
      padding-top: 15%;
      padding-bottom: 5%
    }

    section#main h1 {
      color: #7596ff;
    }

    section#realtime {
      background-color: #ffe6ee;
      padding-top: 12%;
      padding-bottom: 8%
    }

    section#realtime h1 {
      color: #7596ff;
    }

    section#fast-modern {
      background-color: #7596ff;
      padding-top: 15%;
      padding-bottom: 0
    }

    section#fast-modern h1, section#fast-modern p {
      color: white;
    }

    section#end-to-end {
      background-color: #1c1c1c;
      padding-top: 15%;
      padding-bottom: 5%
    }

    section#end-to-end h1 {
      color: white;
      font-weight: bold
    }

    section#end-to-end p, .pale-red {
      color: #ffccdd;
    }

    section#get-started h1 {
      color: #ff0051
    }

    section#get-started {
      background-color: #fafafa;
      padding-top: 10%;
      padding-bottom: 10%
    }

    img.emoji {
      height: 1.2em;
      width: 1.2em;
      position: relative;
      top: 0.2em;
    }

    .copy {
      max-width: 30em;
      padding:0 1em;
      margin: auto;
      font-weight: 200;
    }

    @media (min-width: 40em) {
      .copy {
        max-width: 35em;
      }
    }

    .copy h1 {
      font-size: 1.8em;
      line-height: 0.8;
      font-weight: inherit;
      margin-bottom: 0.3em;
    }

    .copy p {
      line-height: 1.4;
      color: #4f4f4f;
    }

    @media (min-width: 40em) {
      .copy h1 {
        font-size: 2.7em;
      }

      .copy p {
        font-size: 1.3em;
      }
    }

    .figure {
      width: 100%;
      max-width: 60em;
    }

    section#main .figure {
      max-width: 60em;
    }

    section#realtime .figure {
      max-width: 40em;
    }

    section#fast-modern .figure {
      max-width: 90em;
      margin-bottom: -0.3em;
    }

    section#end-to-end .figure {
      max-width: 50em;
      margin-bottom: 3em
    }
  </style>

  <template>

    <section id="main">
      <div class="copy">
        <h1>
          Finally, a web app framework that’s both
          <img src="../images/magical.png" alt="magical" class="emoji">
          and
          <img src="../images/cool.png" alt="cool" class="emoji">.
        </h1>

        <p>
          Bridge is a full stack modular web framework for Dart,
          with clarity and agility in mind.
        </p>
      </div>
      <img class='figure' src="../images/welcome_controller.png">
    </section>

    <section id="realtime">
      <div class="copy">
        <h1>Realtime</h1>

        <p>
          Interact with your running application live,
          from the command line shell instance.
        </p>
      </div>
      <img class='figure' src="../images/cli.png">
    </section>

    <section id="fast-modern">
      <div class="copy">
        <h1>Fast &amp; Modern</h1>

        <p>
          Templates and API that’s made for the modern web.
          Automagic pre-compilation for <span class="pale-red">blazing</span> speed.
        </p>
      </div>
      <img class='figure' src="../images/templating.png">
    </section>

    <section id="end-to-end">
      <div class="copy">
        <h1>End-to-end</h1>

        <p>
          Connected with WebSockets through the Tether.
          It’s what we wished XHR would be like.
        </p>
      </div>
      <img class='figure' src="../images/tether.png">
    </section>

    <section id="get-started">
      <div class="copy">
        <h1>Get started!</h1>

        <p>
          Are you ready to try Bridge out? All you need to have
          installed is Dart and a code editor.
        </p>
        <action-button href='#/getting-started'>Jump in</action-button>
      </div>
    </section>

  </template>

  <script>
    Polymer({
      /**
       * @var {SectionElement[]} _sections
       */
      _sections: [],

      attached: function () {
        var sections = this.querySelectorAll('section');
        for (var i = 0; i < sections.length; i++)
          this._sections.push(sections[i]);
        window.addEventListener('scroll', this._onScroll.bind(this));
        setTimeout(this._onScroll.bind(this), 100);
      },

      _onScroll: function () {
        for (var i = 0; i < this._sections.length; i++) {
          var section = this._sections[i];
          if (section.getBoundingClientRect().top > window.innerHeight / 3 * 2) continue;
          section.classList.add('shown');
          this._sections.splice(this._sections.indexOf(section), 1);
        }
      },
    })
  </script>
</dom-module>