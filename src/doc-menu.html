<dom-module id='doc-menu'>
  <style>
    :host {
      float: left;
    }

    .toggle {
      -webkit-appearance: none;
      -moz-appearance: none;
      border: 0;
      background-color: inherit;
      height: 2em;
      width: 2em;
      position: relative;
    }

    .toggle:before, .toggle:after {
      content: '';
      display: block;
      background-color: white;
      position: absolute;
      width: 2em;
      height: 0.4em;
      opacity: 1;
      left: 0;
      transition: transform 0.3s, background-color 0.2s;
      transition-timing-function: cubic-bezier(.29,.82,.34,.99);
      border-radius: 0.2em;
    }

    .toggle:before {
      top: 0.3em;
    }

    .toggle:after {
      bottom: 0.3em;
    }

    div:not(.shown) > .dropdown {
      opacity: 0;
      pointer-events: none;
    }

    div.shown .toggle:before {
      transform: translateY(0.5em) rotate(45deg);
    }

    div.shown .toggle:after {
      transform: translateY(-0.5em) rotate(-45deg);
    }

    .toggle:hover:before, .toggle:hover:after {
      background-color: #7596ff;
    }

    .dropdown {
      width:100%;
      left:0;
      margin-top: 0.9em;
      box-sizing: border-box;
      transition-property: opacity;
      transition-timing-function: cubic-bezier(.29,.82,.34,.99);
      transition-duration: 0.3s;
      position: absolute;
      background-color: rgba(250, 250, 250, 0.95);
      background-color: #7596ff;
      color: black;
      font-size: 0.8em;
      z-index: 5000;
    }
    ul {
      list-style: none;
      margin:0;
      padding:0 !important;
    }
    ul ul {
      float:left;
      width:25%;
      box-sizing: border-box;
      margin-top: 2em;
      margin-bottom: 2em;
    }
    ul ul:nth-child(4n + 1) {
      clear: both;
    }
    ul ul li a, ul[label]:before {
      display: block;
      padding: 0.3em 2em;
    }

    ul[label]:before {
      content: attr(label);
    }
  </style>
  <template>
    <div class$='{{ _shownClass(shown) }}'>
      <button class='toggle' on-click='_toggle'></button>
      <ul class='dropdown'>
        <template is='dom-repeat' items="{{ categories }}">
          <ul class="category" label$='{{ item.label }}'>
            <template is="dom-repeat" items="{{ item.items }}">
              <li>
                <a href="{{ _toHashDocHref(item.url) }}">{{ item.title }}</a>
              </li>
            </template>
          </ul>
        </template>
      </ul>
    </div>
  </template>
  <script>
    Polymer({
      properties: {
        categories: {
          type: Array,
          value: Docs.index
        },
        shown: {
          type: Boolean,
          value: false
        }
      },

      _shownClass: function (shown) {
        return shown ? 'shown' : '';
      },

      _toHashDocHref: function (url) {
        return '#/docs' + url;
      },

      _toggle: function () {
        this.shown = !this.shown;
      },
    })
  </script>
</dom-module>